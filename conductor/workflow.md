# プロジェクトワークフロー (FaveFit)

## 指針

1. **計画が唯一の信頼できる情報源:** すべての作業は `plan.md` で追跡されなければならない。
2. **技術スタックは意図的に:** 技術スタックへの変更は、実装*前*に `tech-stack.md` に文書化されなければならない。
3. **品質管理 (静的解析):** 実装後は必ず `npm run lint` と `npx tsc --noEmit` を実行し、エラーを解消する。
4. **ユーザーエクスペリエンス第一:** すべての決定はユーザーエクスペリエンスを優先すべきである。
5. **手動検証の徹底:** 機能実装後は、実際のブラウザやテストUIを使用して動作を確認する。

## タスクワークフロー

### 標準タスクワークフロー

1. **タスク選択:** `plan.md` から次のタスクを選択する。
2. **進行中としてマーク:** `plan.md` のステータスを `[~]` に変更する。
3. **実装:** 要求された機能を実装する。
4. **静的解析:** `npm run lint` および `npx tsc --noEmit` を実行し、エラーがないことを確認する。
5. **手動検証:** 開発サーバー等で動作を確認する。
6. **ユーザー承認:** 変更内容をユーザーに提示し、承認を得る。
7. **コミット:** 変更をコミットし、`plan.md` を `[x]` に更新する（コミットハッシュを追記）。

### フェーズ完了プロトコル

フェーズ内の全タスクが完了した際、以下の手順でチェックポイントを作成する：

1. **全体確認:** フェーズ全体の見直しを行い、静的解析にパスすることを確認する。
2. **手動検証計画の提示:** ユーザーに対し、フェーズの成果を確認するための具体的な手順（ブラウザでの操作等）を提示する。
3. **チェックポイントコミット:** ユーザーの承認後、`conductor(checkpoint): Checkpoint end of Phase X` としてコミットする。
4. **計画の更新:** `plan.md` の各フェーズの見出しに `[checkpoint: <sha>]` を追記する。

## 開発コマンド

### セットアップ
```bash
npm install
```

### 日々の開発
```bash
npm run dev    # 開発サーバー起動
npm run lint   # リンター実行
npx tsc --noEmit # 型チェック
```

## 品質ゲート

タスクを完了とする前に、以下を確認する：

- [ ] `npm run lint` でエラーがない
- [ ] `npx tsc --noEmit` で型エラーがない
- [ ] 要求された機能がブラウザで期待通りに動作する
- [ ] モバイルレイアウトが崩れていない（該当する場合）
- [ ] セキュリティ上の脆弱性（APIキーのハードコード等）がない

## コミットガイドライン

### メッセージ形式
```
<type>(<scope>): <description>
```

### タイプ
- `feat`: 新機能
- `fix`: バグ修正
- `docs`: ドキュメントのみ
- `style`: フォーマット、セミコロンの欠落など
- `refactor`: コードのリファクタリング
- `chore`: メンテナンス作業

## 緊急手順 (重大なバグ)
1. 即座に原因を特定し、修正を実装する。
2. `lint` および `tsc` を実行し、他の部分に影響がないか確認する。
3. 手動で徹底的に検証し、デプロイする。
4. `plan.md` に修正内容を記録する。
