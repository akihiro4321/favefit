kind: "AppHostingBackend"
apiVersion: "v1alpha"

# ビルド設定
buildSettings:
  cpu: 1
  memoryMiB: 512
  minInstances: 0
  maxInstances: 10

# 実行時の設定
runSettings:
  cpu: 1
  memoryMiB: 512
  minInstances: 0
  maxInstances: 10
  # Secret Managerから環境変数を注入
  secrets:
    - variable: GOOGLE_GENERATIVE_AI_API_KEY
      secret: google_generative_ai_api_key
      availability:
        - BUILD
        - RUNTIME
    - variable: NEXT_PUBLIC_FIREBASE_API_KEY
      secret: next_public_firebase_api_key
      availability:
        - BUILD
        - RUNTIME
    - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
      secret: next_public_firebase_auth_domain
      availability:
        - BUILD
        - RUNTIME
    - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
      secret: next_public_firebase_project_id
      availability:
        - BUILD
        - RUNTIME
    - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
      secret: next_public_firebase_storage_bucket
      availability:
        - BUILD
        - RUNTIME
    - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
      secret: next_public_firebase_messaging_sender_id
      availability:
        - BUILD
        - RUNTIME
    - variable: NEXT_PUBLIC_FIREBASE_APP_ID
      secret: next_public_firebase_app_id
      availability:
        - BUILD
        - RUNTIME
